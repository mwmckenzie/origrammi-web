charTokenMapGrouped = {
    "UppercaseLetterChar": {
        "UpperA": "A",
        "UpperB": "B",
        "UpperC": "C",
        "UpperD": "D",
        "UpperE": "E",
        "UpperF": "F",
        "UpperG": "G",
        "UpperH": "H",
        "UpperI": "I",
        "UpperJ": "J",
        "UpperK": "K",
        "UpperL": "L",
        "UpperM": "M",
        "UpperN": "N",
        "UpperO": "O",
        "UpperP": "P",
        "UpperQ": "Q",
        "UpperR": "R",
        "UpperS": "S",
        "UpperT": "T",
        "UpperU": "U",
        "UpperV": "V",
        "UpperW": "W",
        "UpperX": "X",
        "UpperY": "Y",
        "UpperZ": "Z"
    },
    "LowercaseLetterChar": {
        "LowerA": "a",
        "LowerB": "b",
        "LowerC": "c",
        "LowerD": "d",
        "LowerE": "e",
        "LowerF": "f",
        "LowerG": "g",
        "LowerH": "h",
        "LowerI": "i",
        "LowerJ": "j",
        "LowerK": "k",
        "LowerL": "l",
        "LowerM": "m",
        "LowerN": "n",
        "LowerO": "o",
        "LowerP": "p",
        "LowerQ": "q",
        "LowerR": "r",
        "LowerS": "s",
        "LowerT": "t",
        "LowerU": "u",
        "LowerV": "v",
        "LowerW": "w",
        "LowerX": "x",
        "LowerY": "y",
        "LowerZ": "z"
    },
    "DecimalDigitNumberChar": {
        "Number0": "0",
        "Number1": "1",
        "Number2": "2",
        "Number3": "3",
        "Number4": "4",
        "Number5": "5",
        "Number6": "6",
        "Number7": "7",
        "Number8": "8",
        "Number9": "9"
    },
    "SpaceSeparatorChar": {
        "SpaceChar": " ",
        "NoBreakSpaceChar": " ",
        "EnQuadChar": " ",
        "EmQuadChar": " ",
        "EnSpaceChar": " ",
        "EmSpaceChar": " ",
        "ThreePerEmSpaceChar": " ",
        "FourPerEmSpaceChar": " ",
        "SixPerEmSpaceChar": " ",
        "FigureSpaceChar": " ",
        "PunctuationSpaceChar": " ",
        "ThinSpaceChar": " ",
        "HairSpaceChar": " ",
        "MediumMathematicalSpaceChar": " ",
        "IdeographicSpaceChar": "　"
    },
    "LineSeparatorChar": {
        "LineSeparatorChar": " ",
        "UnixLineFeedChar": "\n",
        "WindowsCarriageReturnChar": "\r\n",
        "MacClassicLineFeedChar": "\r"
    },
    "ParagraphSeparatorChar": {
        "ParagraphSeparatorChar": " ",
        "HTMLParagraphBreakChar": "<p>"
    },
    "ControlChar": {
        "NullChar": "\u0000",
        "StartOfHeadingChar": "\u0001",
        "StartOfTextChar": "\u0002",
        "EndOfTextChar": "\u0003",
        "EndOfTransmissionChar": "\u0004",
        "EnquiryChar": "\u0005",
        "AcknowledgeChar": "\u0006",
        "BellChar": "\u0007",
        "BackspaceChar": "\b",
        "TabChar": "\t",
        "VerticalTabChar": "\u000b",
        "FormFeedChar": "\f",
        "EscapeChar": "\u001b"
    },
    "FormatChar": {
        "ZeroWidthSpaceChar": "​",
        "ZeroWidthNonJoinerChar": "‌",
        "ZeroWidthJoinerChar": "‍",
        "WordJoinerChar": "⁠",
        "LeftToRightMarkChar": "‎",
        "RightToLeftMarkChar": "‏",
        "LeftToRightEmbeddingChar": "‪",
        "RightToLeftEmbeddingChar": "‫",
        "LeftToRightOverrideChar": "‭",
        "RightToLeftOverrideChar": "‮",
        "PopDirectionalFormattingChar": "‬",
        "InvisibleSeparatorChar": "⁣",
        "InvisiblePlusChar": "⁤"
    },
    "ConnectorPunctuationChar": {
        "UnderscoreChar": "_",
        "HebrewPunctuationMaqqefChar": "־",
        "UndertieChar": "‿",
        "SpaceConnectorChar": "⁀"
    },
    "DashPunctuationChar": {
        "HyphenMinusChar": "-",
        "EnDashChar": "–",
        "EmDashChar": "—",
        "FigureDashChar": "‒",
        "HorizontalBarChar": "―"
    },
    "OpenPunctuationChar": {
        "LeftParenthesisChar": "(",
        "LeftSquareBracketChar": "[",
        "LeftCurlyBraceChar": "{",
        "LeftAngleBracketChar": "〈",
        "LeftDoubleAngleBracketChar": "«"
    },
    "ClosePunctuationChar": {
        "RightParenthesisChar": ")",
        "RightSquareBracketChar": "]",
        "RightCurlyBraceChar": "}",
        "RightAngleBracketChar": "〉",
        "RightDoubleAngleBracketChar": "»"
    },
    "InitialQuotePunctuationChar": {
        "LeftDoubleQuotationMarkChar": "“",
        "LeftSingleQuotationMarkChar": "‘",
        "ReversedDoublePrimeQuotationMarkChar": "‶",
        "LowDoubleQuotationMarkChar": "„",
        "LowSingleQuotationMarkChar": "‚"
    },
    "FinalQuotePunctuationChar": {
        "RightDoubleQuotationMarkChar": "”",
        "RightSingleQuotationMarkChar": "’",
        "DoublePrimeQuotationMarkChar": "″",
        "HighReversedDoubleQuotationMarkChar": "‷",
        "HighReversedSingleQuotationMarkChar": "‸"
    },
    "OtherPunctuationChar": {
        "ExclamationMarkChar": "!",
        "QuestionMarkChar": "?",
        "PeriodChar": ".",
        "EllipsisChar": "…",
        "MiddleDotChar": "·",
        "InterrobangChar": "‽",
        "BulletChar": "•",
        "QuotationMarkChar": "\"",
        "ApostropheChar": "'"
    },
    "MathSymbolChar": {
        "PlusSignChar": "+",
        "MinusSignChar": "-",
        "MultiplicationSignChar": "×",
        "DivisionSignChar": "÷",
        "EqualSignChar": "=",
        "NotEqualSignChar": "≠",
        "GreaterThanSignChar": ">",
        "LessThanSignChar": "<",
        "GreaterThanOrEqualSignChar": "≥",
        "LessThanOrEqualSignChar": "≤"
    },
    "CurrencySymbolChar": {
        "DollarSignChar": "$",
        "EuroSignChar": "€",
        "PoundSignChar": "£",
        "YenSignChar": "¥",
        "IndianRupeeSignChar": "₹",
        "BitcoinSignChar": "₿",
        "CentSignChar": "¢",
        "KoreanWonSignChar": "₩"
    },
    "ModifierSymbolChar": {
        "CircumflexAccentChar": "^",
        "AcuteAccentChar": "´",
        "GraveAccentChar": "`",
        "TildeChar": "~",
        "MacronChar": "¯",
        "OverlineChar": "‾",
        "BreveChar": "˘",
        "DotAboveChar": "˙",
        "RingAboveChar": "˚"
    },
    "OtherSymbolChar": {
        "AtSignChar": "@",
        "HashSignChar": "#",
        "AmpersandChar": "&",
        "PercentSignChar": "%",
        "StarChar": "★",
        "HeartChar": "♥",
        "MusicNoteChar": "♪",
        "CheckMarkChar": "✓",
        "CrossMarkChar": "✗"
    }
};

charTokenMap = {
    "UpperA": "A",
    "UpperB": "B",
    "UpperC": "C",
    "UpperD": "D",
    "UpperE": "E",
    "UpperF": "F",
    "UpperG": "G",
    "UpperH": "H",
    "UpperI": "I",
    "UpperJ": "J",
    "UpperK": "K",
    "UpperL": "L",
    "UpperM": "M",
    "UpperN": "N",
    "UpperO": "O",
    "UpperP": "P",
    "UpperQ": "Q",
    "UpperR": "R",
    "UpperS": "S",
    "UpperT": "T",
    "UpperU": "U",
    "UpperV": "V",
    "UpperW": "W",
    "UpperX": "X",
    "UpperY": "Y",
    "UpperZ": "Z",
    "LowerA": "a",
    "LowerB": "b",
    "LowerC": "c",
    "LowerD": "d",
    "LowerE": "e",
    "LowerF": "f",
    "LowerG": "g",
    "LowerH": "h",
    "LowerI": "i",
    "LowerJ": "j",
    "LowerK": "k",
    "LowerL": "l",
    "LowerM": "m",
    "LowerN": "n",
    "LowerO": "o",
    "LowerP": "p",
    "LowerQ": "q",
    "LowerR": "r",
    "LowerS": "s",
    "LowerT": "t",
    "LowerU": "u",
    "LowerV": "v",
    "LowerW": "w",
    "LowerX": "x",
    "LowerY": "y",
    "LowerZ": "z",
    "Number0": "0",
    "Number1": "1",
    "Number2": "2",
    "Number3": "3",
    "Number4": "4",
    "Number5": "5",
    "Number6": "6",
    "Number7": "7",
    "Number8": "8",
    "Number9": "9",
    "SpaceChar": " ",
    "NoBreakSpaceChar": " ",
    "EnQuadChar": " ",
    "EmQuadChar": " ",
    "EnSpaceChar": " ",
    "EmSpaceChar": " ",
    "ThreePerEmSpaceChar": " ",
    "FourPerEmSpaceChar": " ",
    "SixPerEmSpaceChar": " ",
    "FigureSpaceChar": " ",
    "PunctuationSpaceChar": " ",
    "ThinSpaceChar": " ",
    "HairSpaceChar": " ",
    "MediumMathematicalSpaceChar": " ",
    "IdeographicSpaceChar": "　",
    "LineSeparatorChar": " ",
    "UnixLineFeedChar": "\n",
    "WindowsCarriageReturnChar": "\r\n",
    "MacClassicLineFeedChar": "\r",
    "ParagraphSeparatorChar": " ",
    "HTMLParagraphBreakChar": "<p>",
    "NullChar": "\u0000",
    "StartOfHeadingChar": "\u0001",
    "StartOfTextChar": "\u0002",
    "EndOfTextChar": "\u0003",
    "EndOfTransmissionChar": "\u0004",
    "EnquiryChar": "\u0005",
    "AcknowledgeChar": "\u0006",
    "BellChar": "\u0007",
    "BackspaceChar": "\b",
    "TabChar": "\t",
    "VerticalTabChar": "\u000b",
    "FormFeedChar": "\f",
    "EscapeChar": "\u001b",
    "ZeroWidthSpaceChar": "​",
    "ZeroWidthNonJoinerChar": "‌",
    "ZeroWidthJoinerChar": "‍",
    "WordJoinerChar": "⁠",
    "LeftToRightMarkChar": "‎",
    "RightToLeftMarkChar": "‏",
    "LeftToRightEmbeddingChar": "‪",
    "RightToLeftEmbeddingChar": "‫",
    "LeftToRightOverrideChar": "‭",
    "RightToLeftOverrideChar": "‮",
    "PopDirectionalFormattingChar": "‬",
    "InvisibleSeparatorChar": "⁣",
    "InvisiblePlusChar": "⁤",
    "UnderscoreChar": "_",
    "HebrewPunctuationMaqqefChar": "־",
    "UndertieChar": "‿",
    "SpaceConnectorChar": "⁀",
    "HyphenMinusChar": "-",
    "EnDashChar": "–",
    "EmDashChar": "—",
    "FigureDashChar": "‒",
    "HorizontalBarChar": "―",
    "LeftParenthesisChar": "(",
    "LeftSquareBracketChar": "[",
    "LeftCurlyBraceChar": "{",
    "LeftAngleBracketChar": "〈",
    "LeftDoubleAngleBracketChar": "«",
    "RightParenthesisChar": ")",
    "RightSquareBracketChar": "]",
    "RightCurlyBraceChar": "}",
    "RightAngleBracketChar": "〉",
    "RightDoubleAngleBracketChar": "»",
    "LeftDoubleQuotationMarkChar": "“",
    "LeftSingleQuotationMarkChar": "‘",
    "ReversedDoublePrimeQuotationMarkChar": "‶",
    "LowDoubleQuotationMarkChar": "„",
    "LowSingleQuotationMarkChar": "‚",
    "RightDoubleQuotationMarkChar": "”",
    "RightSingleQuotationMarkChar": "’",
    "DoublePrimeQuotationMarkChar": "″",
    "HighReversedDoubleQuotationMarkChar": "‷",
    "HighReversedSingleQuotationMarkChar": "‸",
    "ExclamationMarkChar": "!",
    "QuestionMarkChar": "?",
    "PeriodChar": ".",
    "EllipsisChar": "…",
    "MiddleDotChar": "·",
    "InterrobangChar": "‽",
    "BulletChar": "•",
    "QuotationMarkChar": "\"",
    "ApostropheChar": "'",
    "PlusSignChar": "+",
    "MinusSignChar": "-",
    "MultiplicationSignChar": "×",
    "DivisionSignChar": "÷",
    "EqualSignChar": "=",
    "NotEqualSignChar": "≠",
    "GreaterThanSignChar": ">",
    "LessThanSignChar": "<",
    "GreaterThanOrEqualSignChar": "≥",
    "LessThanOrEqualSignChar": "≤",
    "DollarSignChar": "$",
    "EuroSignChar": "€",
    "PoundSignChar": "£",
    "YenSignChar": "¥",
    "IndianRupeeSignChar": "₹",
    "BitcoinSignChar": "₿",
    "CentSignChar": "¢",
    "KoreanWonSignChar": "₩",
    "CircumflexAccentChar": "^",
    "AcuteAccentChar": "´",
    "GraveAccentChar": "`",
    "TildeChar": "~",
    "MacronChar": "¯",
    "OverlineChar": "‾",
    "BreveChar": "˘",
    "DotAboveChar": "˙",
    "RingAboveChar": "˚",
    "AtSignChar": "@",
    "HashSignChar": "#",
    "AmpersandChar": "&",
    "PercentSignChar": "%",
    "StarChar": "★",
    "HeartChar": "♥",
    "MusicNoteChar": "♪",
    "CheckMarkChar": "✓",
    "CrossMarkChar": "✗",
    "ColonChar": ":",
    "SemiColonChar": ";",
    "CommaChar": ","
};



/**
 * @param {string} char - Single char look-up value.
 * @returns {string|null} Token Name or null if char not found.
 */
GetTokenName = function(char) {
    return char in charTokenMap ? charTokenMap[char] : null;
}

/**
 * @param {string} char - Single char look-up value.
 * @returns {string|null} Token Name or null if char not found.
 */
GetTokenByValue = function(char) {
    for (let key in charTokenMap) {
        if (charTokenMap[key] === char) {
            return key;
        }
    }
    return null;
}

/**
 * @param {string} char - Single char look-up value.
 * @returns {TokenMap|null} Token Name or null if char not found.
 */
GetCharTokenMap = function(char) {
    for (let key in charTokenMap) {
        if (charTokenMap[key] === char) {
            return new TokenMap(key, char);
        }
    }
    return null;
}

class TokenMap{
    constructor(tid, value) {
        this.tid = tid;
        this.value = value;
    }
    
    toString() {
        return `[TID: ${this.tid}, VALUE: ${this.value}]`
    }
}


/**
 * Converts a grouped token map (with nested key-value pairs)
 * into a new object where each group is an array of token keys.
 *
 * @param {Object} groupedMap - The original grouped token map.
 * @returns {Object} A new object mapping group names to arrays of token keys.
 */
ConvertGroupedTokenMap = function convertGroupedTokenMap(groupedMap) {
    const result = {};
    for (const group in groupedMap) {
        if (groupedMap.hasOwnProperty(group)) {
            // Extract only the keys from the nested object.
            result[group] = Object.keys(groupedMap[group]);
        }
    }
    return result;
}

const groupedCharTokenMap = {
    "UppercaseLetterChar": [
    "UpperA",
    "UpperB",
    "UpperC",
    "UpperD",
    "UpperE",
    "UpperF",
    "UpperG",
    "UpperH",
    "UpperI",
    "UpperJ",
    "UpperK",
    "UpperL",
    "UpperM",
    "UpperN",
    "UpperO",
    "UpperP",
    "UpperQ",
    "UpperR",
    "UpperS",
    "UpperT",
    "UpperU",
    "UpperV",
    "UpperW",
    "UpperX",
    "UpperY",
    "UpperZ"
],
    "LowercaseLetterChar": [
    "LowerA",
    "LowerB",
    "LowerC",
    "LowerD",
    "LowerE",
    "LowerF",
    "LowerG",
    "LowerH",
    "LowerI",
    "LowerJ",
    "LowerK",
    "LowerL",
    "LowerM",
    "LowerN",
    "LowerO",
    "LowerP",
    "LowerQ",
    "LowerR",
    "LowerS",
    "LowerT",
    "LowerU",
    "LowerV",
    "LowerW",
    "LowerX",
    "LowerY",
    "LowerZ"
],
    "DecimalDigitNumberChar": [
    "Number0",
    "Number1",
    "Number2",
    "Number3",
    "Number4",
    "Number5",
    "Number6",
    "Number7",
    "Number8",
    "Number9"
],
    "SpaceSeparatorChar": [
    "SpaceChar",
    "NoBreakSpaceChar",
    "EnQuadChar",
    "EmQuadChar",
    "EnSpaceChar",
    "EmSpaceChar",
    "ThreePerEmSpaceChar",
    "FourPerEmSpaceChar",
    "SixPerEmSpaceChar",
    "FigureSpaceChar",
    "PunctuationSpaceChar",
    "ThinSpaceChar",
    "HairSpaceChar",
    "MediumMathematicalSpaceChar",
    "IdeographicSpaceChar"
],
    "LineSeparatorChar": [
    "LineSeparatorChar",
    "UnixLineFeedChar",
    "WindowsCarriageReturnChar",
    "MacClassicLineFeedChar"
],
    "ParagraphSeparatorChar": [
    "ParagraphSeparatorChar",
    "HTMLParagraphBreakChar"
],
    "ControlChar": [
    "NullChar",
    "StartOfHeadingChar",
    "StartOfTextChar",
    "EndOfTextChar",
    "EndOfTransmissionChar",
    "EnquiryChar",
    "AcknowledgeChar",
    "BellChar",
    "BackspaceChar",
    "TabChar",
    "VerticalTabChar",
    "FormFeedChar",
    "EscapeChar"
],
    "FormatChar": [
    "ZeroWidthSpaceChar",
    "ZeroWidthNonJoinerChar",
    "ZeroWidthJoinerChar",
    "WordJoinerChar",
    "LeftToRightMarkChar",
    "RightToLeftMarkChar",
    "LeftToRightEmbeddingChar",
    "RightToLeftEmbeddingChar",
    "LeftToRightOverrideChar",
    "RightToLeftOverrideChar",
    "PopDirectionalFormattingChar",
    "InvisibleSeparatorChar",
    "InvisiblePlusChar"
],
    "ConnectorPunctuationChar": [
    "UnderscoreChar",
    "HebrewPunctuationMaqqefChar",
    "UndertieChar",
    "SpaceConnectorChar"
],
    "DashPunctuationChar": [
    "HyphenMinusChar",
    "EnDashChar",
    "EmDashChar",
    "FigureDashChar",
    "HorizontalBarChar"
],
    "OpenPunctuationChar": [
    "LeftParenthesisChar",
    "LeftSquareBracketChar",
    "LeftCurlyBraceChar",
    "LeftAngleBracketChar",
    "LeftDoubleAngleBracketChar"
],
    "ClosePunctuationChar": [
    "RightParenthesisChar",
    "RightSquareBracketChar",
    "RightCurlyBraceChar",
    "RightAngleBracketChar",
    "RightDoubleAngleBracketChar"
],
    "InitialQuotePunctuationChar": [
    "LeftDoubleQuotationMarkChar",
    "LeftSingleQuotationMarkChar",
    "ReversedDoublePrimeQuotationMarkChar",
    "LowDoubleQuotationMarkChar",
    "LowSingleQuotationMarkChar"
],
    "FinalQuotePunctuationChar": [
    "RightDoubleQuotationMarkChar",
    "RightSingleQuotationMarkChar",
    "DoublePrimeQuotationMarkChar",
    "HighReversedDoubleQuotationMarkChar",
    "HighReversedSingleQuotationMarkChar"
],
    "OtherPunctuationChar": [
    "ExclamationMarkChar",
    "QuestionMarkChar",
    "PeriodChar",
    "EllipsisChar",
    "MiddleDotChar",
    "InterrobangChar",
    "BulletChar",
    "QuotationMarkChar",
    "ApostropheChar"
],
    "MathSymbolChar": [
    "PlusSignChar",
    "MinusSignChar",
    "MultiplicationSignChar",
    "DivisionSignChar",
    "EqualSignChar",
    "NotEqualSignChar",
    "GreaterThanSignChar",
    "LessThanSignChar",
    "GreaterThanOrEqualSignChar",
    "LessThanOrEqualSignChar"
],
    "CurrencySymbolChar": [
    "DollarSignChar",
    "EuroSignChar",
    "PoundSignChar",
    "YenSignChar",
    "IndianRupeeSignChar",
    "BitcoinSignChar",
    "CentSignChar",
    "KoreanWonSignChar"
],
    "ModifierSymbolChar": [
    "CircumflexAccentChar",
    "AcuteAccentChar",
    "GraveAccentChar",
    "TildeChar",
    "MacronChar",
    "OverlineChar",
    "BreveChar",
    "DotAboveChar",
    "RingAboveChar"
],
    "OtherSymbolChar": [
    "AtSignChar",
    "HashSignChar",
    "AmpersandChar",
    "PercentSignChar",
    "StarChar",
    "HeartChar",
    "MusicNoteChar",
    "CheckMarkChar",
    "CrossMarkChar"
]
}